diff -up mozilla-aurora/browser/components/preferences/advanced.xul.default mozilla-aurora/browser/components/preferences/advanced.xul
--- mozilla-aurora/browser/components/preferences/advanced.xul.default	2015-03-12 13:21:15.000000000 +0100
+++ mozilla-aurora/browser/components/preferences/advanced.xul	2015-03-12 14:23:22.419249264 +0100
@@ -58,7 +58,7 @@
                   type="bool"/>
 
      <!-- Update tab -->
-#ifdef MOZ_UPDATER
+#ifdef 0
       <preference id="app.update.enabled"              name="app.update.enabled"              type="bool"/>
       <preference id="app.update.auto"                 name="app.update.auto"                 type="bool"/>
 #ifdef XP_WIN
@@ -95,7 +95,7 @@
                   type="int"/>
     </preferences>
 
-#ifdef HAVE_SHELL_SERVICE
+#ifdef 0
     <stringbundle id="bundleShell" src="chrome://browser/locale/shellservice.properties"/>
     <stringbundle id="bundleBrand" src="chrome://branding/locale/brand.properties"/>
 #endif
diff -up mozilla-aurora/browser/components/shell/nsGNOMEShellService.cpp.default mozilla-aurora/browser/components/shell/nsGNOMEShellService.cpp
--- mozilla-aurora/browser/components/shell/nsGNOMEShellService.cpp.default	2015-03-12 13:21:16.000000000 +0100
+++ mozilla-aurora/browser/components/shell/nsGNOMEShellService.cpp	2015-03-12 14:23:22.419249264 +0100
@@ -149,8 +149,8 @@ nsGNOMEShellService::GetAppPathFromLaunc
 bool
 nsGNOMEShellService::KeyMatchesAppName(const char *aKeyValue) const
 {
+  nsAutoCString appName;
 
-  gchar *commandPath;
   if (mUseLocaleFilenames) {
     gchar *nativePath = g_filename_from_utf8(aKeyValue, -1,
                                              nullptr, nullptr, nullptr);
@@ -159,17 +159,13 @@ nsGNOMEShellService::KeyMatchesAppName(c
       return false;
     }
 
-    commandPath = g_find_program_in_path(nativePath);
+    appName.Assign(nativePath);
     g_free(nativePath);
   } else {
-    commandPath = g_find_program_in_path(aKeyValue);
+    appName.Assign(aKeyValue);
   }
 
-  if (!commandPath)
-    return false;
-
-  bool matches = mAppPath.Equals(commandPath);
-  g_free(commandPath);
+  bool matches = mAppPath.Equals(appName);
   return matches;
 }
 
@@ -254,16 +250,7 @@ nsGNOMEShellService::SetDefaultBrowser(b
   nsCOMPtr<nsIGConfService> gconf = do_GetService(NS_GCONFSERVICE_CONTRACTID);
   nsCOMPtr<nsIGIOService> giovfs = do_GetService(NS_GIOSERVICE_CONTRACTID);
   if (gconf) {
-    nsAutoCString appKeyValue;
-    if (mAppIsInPath) {
-      // mAppPath is in the users path, so use only the basename as the launcher
-      gchar *tmp = g_path_get_basename(mAppPath.get());
-      appKeyValue = tmp;
-      g_free(tmp);
-    } else {
-      appKeyValue = mAppPath;
-    }
-
+    nsAutoCString appKeyValue(MOZ_APP_NAME);
     appKeyValue.AppendLiteral(" %s");
 
     for (unsigned int i = 0; i < ArrayLength(appProtocols); ++i) {
diff -up mozilla-aurora/browser/components/shell/nsGNOMEShellService.h.default mozilla-aurora/browser/components/shell/nsGNOMEShellService.h
--- mozilla-aurora/browser/components/shell/nsGNOMEShellService.h.default	2015-03-12 13:21:16.000000000 +0100
+++ mozilla-aurora/browser/components/shell/nsGNOMEShellService.h	2015-03-12 14:23:22.420249261 +0100
@@ -13,7 +13,7 @@
 class nsGNOMEShellService MOZ_FINAL : public nsIShellService
 {
 public:
-  nsGNOMEShellService() : mCheckedThisSession(false), mAppIsInPath(false) { }
+  nsGNOMEShellService() : mCheckedThisSession(true), mAppIsInPath(true) { }
 
   NS_DECL_ISUPPORTS
   NS_DECL_NSISHELLSERVICE
